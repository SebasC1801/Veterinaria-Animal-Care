<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veterinaria AnimalCare - Sistema de Gestión</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header" id="mainHeader" style="display: none;">
        <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <img src="/images/Logo.png" alt="VETERINARIA ANIMALCARE" class="logo-image">
                    </div>
                </div>
                <nav class="nav" id="mainNav">
                    <a href="#inicio" class="nav-link active">
                        <i class="fas fa-home"></i> Inicio
                    </a>
                    <a href="#registro" class="nav-link">
                        <i class="fas fa-plus-circle"></i> Registro
                    </a>
                    <a href="#registros" class="nav-link">
                        <i class="fas fa-list"></i> Registros
                    </a>
                    <a href="#consultas" class="nav-link">
                        <i class="fas fa-stethoscope"></i> Consultas
                    </a>
                    <a href="#citas-medicas" class="nav-link">
                        <i class="fas fa-calendar-check"></i> Citas Médicas
                    </a>
                </nav>
                
                <!-- Menú hamburguesa para móvil -->
                <button class="mobile-menu-toggle" id="mobileMenuToggle" onclick="toggleMobileMenu()">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                
                <div class="user-actions">
                    <button onclick="logout()" class="btn btn-logout-header" title="Cerrar Sesión">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
    </header>

    <!-- Sistema de Autenticación -->
    <div id="authContainer" class="auth-container">
        <div class="auth-wrapper">
            <!-- Login Form -->
            <div id="loginForm" class="auth-form">
                <div class="auth-header">
                    <div class="auth-logo">
                        <div class="logo-icon">
                            <img src="/images/Logo.png" alt="VETERINARIA ANIMALCARE" class="logo-image">
                        </div>
                    </div>
                    <div style="display:flex; align-items:center; justify-content:center; width:100%">
                        <div style="text-align:center; width:100%">
                            <h2>Iniciar Sesión</h2>
                            <p>Accede a tu cuenta veterinaria</p>
                        </div>
                        <!-- Botón de modo oscuro eliminado temporalmente -->
                    </div>
                </div>
                
                <form id="loginFormElement" class="auth-form-element" onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label class="form-label" for="loginEmail">Correo Electrónico</label>
                        <input type="email" class="form-control" id="loginEmail" name="email" 
                               placeholder="tu@email.com" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="loginPassword">Contraseña</label>
                        <input type="password" class="form-control" id="loginPassword" name="password" 
                               placeholder="Tu contraseña" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="loginRole">Tipo de Usuario</label>
                        <select class="form-control form-select" id="loginRole" name="role" required>
                            <option value="">Selecciona tu rol</option>
                            <option value="user">Usuario Común</option>
                            <option value="employee">Empleado</option>
                            <option value="admin">Administrador</option>
                        </select>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-lg auth-btn">
                        <i class="fas fa-sign-in-alt"></i>
                        Iniciar Sesión
                    </button>
                    
                    <div class="auth-switch">
                        <p>¿No tienes cuenta? <a href="#" onclick="showRegisterForm()">Regístrate aquí</a></p>
                    </div>
                </form>
            </div>
        
            <!-- Register Form -->
            <div id="registerForm" class="auth-form" style="display: none;">
                <div class="auth-header">
                    <div class="auth-logo">
                        <div class="logo-icon">
                            <img src="/images/Logo.png" alt="VETERINARIA ANIMALCARE" class="logo-image">
                        </div>
                    </div>
                    <h2>Crear Cuenta</h2>
                    <p>Regístrate en el sistema veterinario</p>
                </div>
            
            <form id="registerFormElement" class="auth-form-element" onsubmit="handleRegister(event)">
                <div class="form-group">
                    <label class="form-label" for="registerName">Nombre Completo *</label>
                    <input type="text" class="form-control" id="registerName" name="name" 
                           placeholder="Ej: Juan Pérez" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="registerEmail">Correo Electrónico *</label>
                    <input type="email" class="form-control" id="registerEmail" name="email" 
                           placeholder="tu@email.com" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="registerPassword">Contraseña *</label>
                    <input type="password" class="form-control" id="registerPassword" name="password" 
                           placeholder="Mínimo 6 caracteres" required minlength="6">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="registerConfirmPassword">Confirmar Contraseña *</label>
                    <input type="password" class="form-control" id="registerConfirmPassword" name="confirmPassword" 
                           placeholder="Repite tu contraseña" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="registerRole">Tipo de Usuario *</label>
                    <select class="form-control form-select" id="registerRole" name="role" required>
                        <option value="">Selecciona tu rol</option>
                        <option value="user">Usuario Común</option>
                        <option value="employee">Empleado</option>
                        <option value="admin">Administrador</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="registerPhone">Teléfono *</label>
                    <input type="tel" class="form-control" id="registerPhone" name="phone" 
                           placeholder="Ej: +57 300 123 4567" required>
                </div>
                
                <button type="submit" class="btn btn-primary btn-lg auth-btn">
                    <i class="fas fa-user-plus"></i>
                    Crear Cuenta
                </button>
                
                <div class="auth-switch">
                    <p>¿Ya tienes cuenta? <a href="#" onclick="showLoginForm()">Inicia sesión aquí</a></p>
                </div>
            </form>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main" id="mainContent" style="display: none;">
        <!-- Inicio Section -->
            <section id="inicio" class="section active">
                <!-- Banner Section -->
                <div class="banner-section">
                    <img src="/images/banner.png" alt="Veterinaria AnimalCare" class="banner-image">
                    <div class="banner-overlay">
                        <h1 class="banner-title">¡Tu mascota merece el mejor cuidado!</h1>
                        <p class="banner-subtitle">Sistema de gestión veterinaria para la materia de diseño de software</p>
                        
                        <!-- User Info in Banner -->
                        <div class="banner-user-info" id="userInfo">
                            <div class="banner-user-welcome">
                                <div class="banner-user-avatar">
                                    <i class="fas fa-user-circle"></i>
                                </div>
                                <div class="banner-user-details">
                                    <h3><span id="userName"></span></h3>
                                    <p class="banner-user-role"><span id="userRole"></span></p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Elegant Banner Decoration -->
                        <div class="banner-decoration">
                            <div class="decoration-line"></div>
                            <div class="decoration-icon">
                                <i class="fas fa-paw"></i>
                            </div>
                            <div class="decoration-line"></div>
                        </div>
                    </div>
                </div>

                <!-- Statistics Cards -->
                <div class="stats-section">
                    <div class="grid grid-cols-3 gap-6" style="max-width: 1000px; margin: 0 auto; justify-items: center;">
                        <div class="card text-center">
                            <div class="mb-4">
                                <i class="fas fa-paw text-3xl text-primary-color"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-amber-800" id="totalPets">0</h3>
                            <p class="text-amber-700">Mascotas Registradas</p>
                        </div>
                        
                        <div class="card text-center">
                            <div class="mb-4">
                                <i class="fas fa-user-md text-3xl text-secondary-color"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-amber-800">3</h3>
                            <p class="text-amber-700">Veterinarios</p>
                        </div>
                        
                        <div class="card text-center">
                            <div class="mb-4">
                                <i class="fas fa-calendar-alt text-3xl text-accent-color"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-amber-800">12</h3>
                            <p class="text-amber-700">Citas Programadas</p>
                        </div>
                        

                    </div>
                </div>

                <!-- Description Section -->
                <div class="description-section">
                    <div class="card">
                        <h2 class="description-title">¿Qué puedes hacer en Veterinaria AnimalCare?</h2>
                        <div class="description-content">
                            <p class="description-text">
                                Bienvenido a nuestro sistema de gestión veterinaria integral, pensado para ofrecerte una experiencia completa y eficiente en el cuidado de tus mascotas. Si te interesa alguno de los servicios que te presentaremos a continuación. Por favor da click sobre la descripción y se te llevará a la sección correspondiente.
                            </p>
                            
                            <div class="description-features">
                                <div class="feature-item" onclick="showSection('registro')" style="cursor: pointer;" title="Ir a registro de mascotas">
                                    <div class="feature-icon">
                                        <i class="fas fa-paw"></i>
                                    </div>
                                    <div class="feature-content">
                                        <h3>Registro de Mascotas</h3>
                                        <p>Registra y gestiona el perfil completo de tus mascotas, incluyendo información médica, vacunas, historial clínico y datos del propietario. Mantén un registro detallado y actualizado de cada animal.</p>
                                    </div>
                                </div>
                                
                                <div class="feature-item" onclick="showQuickConsultationModal()" style="cursor: pointer;" title="Crear consulta rápida">
                                    <div class="feature-icon">
                                        <i class="fas fa-stethoscope"></i>
                                    </div>
                                    <div class="feature-content">
                                        <h3>Gestión de Consultas</h3>
                                        <p>Programa, gestiona y realiza seguimiento de consultas médicas. Los veterinarios pueden crear expedientes detallados, prescribir tratamientos y mantener un historial médico completo.</p>
                                    </div>
                                </div>
                                
                                <div class="feature-item" onclick="showAppointmentsSection()" style="cursor: pointer;" title="Gestionar citas médicas">
                                    <div class="feature-icon">
                                        <i class="fas fa-calendar-check"></i>
                                    </div>
                                    <div class="feature-content">
                                        <h3>Citas Médicas</h3>
                                        <p>Organiza y programa citas médicas con diferentes niveles de prioridad. Los administradores y empleados pueden gestionar la agenda completa, asignar veterinarios y establecer prioridades según la urgencia.</p>
                                    </div>
                                </div>
                                
                                <div class="feature-item" onclick="showUserProfileModal()" style="cursor: pointer;" title="Ver perfil de usuario">
                                    <div class="feature-icon">
                                        <i class="fas fa-users-cog"></i>
                                    </div>
                                    <div class="feature-content">
                                        <h3>Control de Accesos</h3>
                                        <p>Sistema de roles diferenciado: Administradores tienen acceso completo, empleados pueden gestionar citas y consultas, y usuarios pueden registrar mascotas y ver su información personal.</p>
                                    </div>
                                </div>
                                
                                <div class="feature-item" onclick="animateStats()" style="cursor: pointer;" title="Ver estadísticas animadas">
                                    <div class="feature-icon">
                                        <i class="fas fa-chart-line"></i>
                                    </div>
                                    <div class="feature-content">
                                        <h3>Estadísticas y Reportes</h3>
                                        <p>Visualiza estadísticas en tiempo real sobre mascotas registradas, citas programadas, consultas realizadas y otros indicadores importantes para el funcionamiento de la clínica.</p>
                                    </div>
                                </div>
                                
                                <div class="feature-item" onclick="showSecurityModal()" style="cursor: pointer;" title="Información de seguridad">
                                    <div class="feature-icon">
                                        <i class="fas fa-shield-alt"></i>
                                    </div>
                                    <div class="feature-content">
                                        <h3>Seguridad y Privacidad</h3>
                                        <p>Protección completa de datos médicos y personales con encriptación segura. Cada usuario solo puede acceder a la información autorizada según su rol en el sistema.</p>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                </div>

            </section>

            <!-- Registro Section -->
            <section id="registro" class="section">
                <div class="card">
                    <div class="card-header" style="position: relative;">
                        <h1 class="card-title">Registro de Nueva Mascota</h1>
                        <p class="card-subtitle">Complete la información paso a paso para registrar una nueva mascota</p>
                        
                        <!-- Botón de navegación independiente -->
                        <div style="position: absolute; top: 15px; right: 20px;">
                            <button onclick="showSection('inicio')" class="btn btn-outline" style="background: rgba(255,255,255,0.9); border: 2px solid #b45309; color: #b45309; font-weight: bold; padding: 8px 16px; transition: all 0.3s ease;">
                                <i class="fas fa-home"></i>
                                Volver al Inicio
                            </button>
                        </div>
                    </div>

                    <form id="registroForm" class="registro-form wizard-form show-all">
                        <!-- Paso 1: Información Básica -->
                        <div class="wizard-content active" data-step="1">
                            <div class="step-header">
                                <h2><i class="fas fa-paw"></i> Información Básica</h2>
                                <p>Comencemos con los datos esenciales de tu mascota</p>
                            </div>
                            
                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label" for="name">Nombre de la Mascota *</label>
                                    <input type="text" class="form-control" id="name" name="name" 
                                           placeholder="Ej: Max, Luna, Piolín..." required>
                                    <div class="field-help">El nombre que usas para llamar a tu mascota</div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="family_type">Tipo de Familia *</label>
                                    <select class="form-control form-select" id="family_type" name="familyType" required>
                                        <option value="">Seleccione una familia</option>
                                        <option value="domestic">Doméstica</option>
                                        <option value="exotic">Exótica</option>
                                    </select>
                                    <div class="field-help">Doméstica: perros, gatos. Exótica: reptiles, aves exóticas</div>
                                </div>
                            </div>
                        </div>

                        <!-- Paso 2: Detalles del Animal -->
                        <div class="wizard-content" data-step="2">
                            <div class="step-header">
                                <h2><i class="fas fa-info-circle"></i> Detalles del Animal</h2>
                                <p>Información específica sobre la especie y características</p>
                            </div>
                            
                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label" for="animal_type">Tipo de Animal *</label>
                                    <select class="form-control form-select" id="animal_type" name="animalType" required>
                                        <option value="">Seleccione un tipo</option>
                                        <option value="dog">Perro</option>
                                        <option value="cat">Gato</option>
                                        <option value="bird">Ave</option>
                                        <option value="reptile">Reptil</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="breed">Raza *</label>
                                    <select class="form-control form-select" id="breed" name="breed" required>
                                        <option value="">Selecciona una raza</option>
                                    </select>
                                    <input type="text" class="form-control" id="breed_input" name="breed_input" 
                                           placeholder="Escribe la raza manualmente..." style="display: none;">
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="age">Edad (años) *</label>
                                    <input type="number" class="form-control" id="age" name="age" 
                                           min="0" max="30" placeholder="Ej: 3" required>
                                    <div class="field-help">Si no conoces la edad exacta, puedes aproximar</div>
                                </div>
                            </div>


                        </div>

                        <!-- Paso 3: Información del Propietario -->
                        <div class="wizard-content" data-step="3">
                            <div class="step-header">
                                <h2><i class="fas fa-user"></i> Información del Propietario</h2>
                                <p>Datos de contacto del responsable de la mascota</p>
                            </div>
                            
                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label" for="owner_name">Nombre Completo *</label>
                                    <input type="text" class="form-control" id="owner_name" name="ownerName" 
                                           placeholder="Ej: Juan Pérez García" required>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="owner_phone">Teléfono *</label>
                                    <input type="tel" class="form-control" id="owner_phone" name="ownerPhone" 
                                           placeholder="Ej: +57 300 123 4567" required>
                                    <div class="field-help">Incluye código de país para mejor contacto</div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="owner_email">Email</label>
                                    <input type="email" class="form-control" id="owner_email" name="ownerEmail" 
                                           placeholder="Ej: juan@email.com">
                                    <div class="field-help">Para envío de recordatorios y resultados</div>
                                </div>
                            </div>

                            
                        </div>

                        <!-- Guardado directo -->
                        <div class="wizard-navigation" style="display: none;"></div>

                        <div style="display: flex; justify-content: center; margin-top: 1.5rem;">
                            <button type="button" id="savePetDirectBtn" class="btn btn-success wizard-btn">
                                <i class="fas fa-save"></i>
                                <span class="btn-text">Guardar Mascota</span>
                            </button>
                        </div>

                        <!-- Botones adicionales -->
                        <div class="form-actions" style="margin-top: 2rem; border-top: 1px solid var(--border-color); padding-top: 1rem;">
                            <button type="button" onclick="showSection('registros')" class="btn btn-outline">
                                <i class="fas fa-list"></i>
                                Ver Registros
                            </button>
                            <button type="button" onclick="window.testRegisterPet()" class="btn btn-warning">
                                <i class="fas fa-bug"></i>
                                Test Sistema
                            </button>
                        </div>
                    </form>

                    <!-- Modal de resultado de guardado -->
                    <div id="saveResultModal" class="modal" style="display: none;">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3 id="saveResultTitle">Resultado del guardado</h3>
                                <button class="modal-close" onclick="closeSaveResultModal()"><i class="fas fa-times"></i></button>
                            </div>
                            <div class="modal-body">
                                <p id="saveResultMessage"></p>
                            </div>
                            <div class="modal-actions" style="display: flex; gap: 0.75rem; justify-content: flex-end;">
                                <button id="retrySaveBtn" class="btn btn-primary" style="display: none;">Volver a intentar</button>
                                <button id="closeSaveModalBtn" class="btn btn-outline" onclick="closeSaveResultModal()">Cerrar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Registros Section -->
            <section id="registros" class="section">
                <div class="card">
                    <div class="card-header" style="position: relative;">
                        <h1 class="card-title">Registros de Mascotas</h1>
                        <p class="card-subtitle">Lista de todas las mascotas registradas en el sistema</p>
                        <!-- Barra de búsqueda por nombre -->
                        <div class="searchbar" style="margin-top: 12px; display: flex; gap: 8px; align-items: center;">
                            <input type="text" id="petSearchInput" class="form-control" placeholder="Buscar por nombre de mascota..." oninput="filterPetsByName()" />
                            <button type="button" id="petSearchBtn" class="btn btn-outline" onclick="filterPetsByName()" title="Buscar">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                        
                        <!-- Botón de navegación independiente -->
                        <div style="position: absolute; top: 15px; right: 20px;">
                            <button onclick="showSection('inicio')" class="btn btn-outline" style="background: rgba(255,255,255,0.9); border: 2px solid #b45309; color: #b45309; font-weight: bold; padding: 8px 16px; transition: all 0.3s ease;">
                                <i class="fas fa-home"></i>
                                Volver al Inicio
                            </button>
                        </div>
                    </div>
                    
                    <!-- Botones de navegación -->
                    <div class="form-actions" style="margin-bottom: 20px;">
                        <button onclick="showSection('registro')" class="btn btn-primary btn-lg">
                            <i class="fas fa-plus-circle"></i>
                            Registrar Nueva Mascota
                        </button>
                    </div>
                    
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Nombre</th>
                                    <th>Edad</th>
                                    <th>Raza</th>
                                    <th>Tipo</th>
                                    <th>Familia</th>
                                    <th>Propietario</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="petsTableBody">
                                <!-- Los registros se cargarán dinámicamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Citas Médicas Section -->
            <section id="citas-medicas" class="section">
                <div class="card">
                    <div class="card-header" style="position: relative;">
                        <h1 class="card-title">
                            <i class="fas fa-calendar-check"></i>
                            Gestión de Citas Médicas
                        </h1>
                        <p class="card-subtitle">Administra y visualiza todas las citas programadas</p>
                        
                        <!-- Botón de navegación independiente -->
                        <div style="position: absolute; top: 15px; right: 20px;">
                            <button onclick="showSection('inicio')" class="btn btn-outline" style="background: rgba(255,255,255,0.9); border: 2px solid #b45309; color: #b45309; font-weight: bold; padding: 8px 16px; transition: all 0.3s ease;">
                                <i class="fas fa-home"></i>
                                Volver al Inicio
                            </button>
                        </div>
                    </div>
                    
                    <div class="card-body">

                        <!-- Filtros y búsqueda -->
                        <div class="filters-section">
                            <div class="filter-group">
                                <label for="filterStatus">Filtrar por Estado:</label>
                                <select id="filterStatus" class="form-control form-select">
                                    <option value="">Todos los estados</option>
                                    <option value="scheduled">Programadas</option>
                                    <option value="completed">Completadas</option>
                                    <option value="cancelled">Canceladas</option>
                                </select>
                            </div>
                            
                            <div class="filter-group">
                                <label for="filterVet">Filtrar por Veterinario:</label>
                                <select id="filterVet" class="form-control form-select">
                                    <option value="">Todos los veterinarios</option>
                                    <option value="dr_garcia">Dr. García</option>
                                    <option value="dra_martinez">Dra. Martínez</option>
                                    <option value="dr_rodriguez">Dr. Rodríguez</option>
                                </select>
                            </div>
                            
                            <button onclick="applyFilters()" class="btn btn-primary">
                                <i class="fas fa-filter"></i> Aplicar Filtros
                            </button>
                        </div>
                        
                        <!-- Estadísticas de citas -->
                        <div class="appointment-stats">
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-calendar-alt"></i>
                                </div>
                                <div class="stat-info">
                                    <h3 id="totalAppointments">0</h3>
                                    <p>Total Citas</p>
                                </div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="stat-info">
                                    <h3 id="pendingAppointments">0</h3>
                                    <p>Pendientes</p>
                                </div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div class="stat-info">
                                    <h3 id="completedAppointments">0</h3>
                                    <p>Completadas</p>
                                </div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <div class="stat-info">
                                    <h3 id="urgentAppointments">0</h3>
                                    <p>Urgentes</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Lista de citas -->
                        <div class="table-container">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Mascota</th>
                                        <th>Dueño</th>
                                        <th>Fecha</th>
                                        <th>Hora</th>
                                        <th>Veterinario</th>
                                        <th>Motivo</th>
                                        <th>Prioridad</th>
                                        <th>Estado</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="appointmentsTableBody">
                                    <!-- Las citas se cargarán dinámicamente -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Búsqueda Avanzada Section -->

            <!-- Consultas Veterinarias Section -->
            <section id="consultas" class="section">
                <div class="card">
                    <div class="card-header" style="position: relative;">
                        <h1 class="card-title">
                            <i class="fas fa-stethoscope"></i>
                            Gestión de Consultas Veterinarias
                        </h1>
                        <p class="card-subtitle">Programa y gestiona consultas médicas para las mascotas</p>
                        
                        <!-- Botón de navegación independiente -->
                        <div style="position: absolute; top: 15px; right: 20px;">
                            <button onclick="showSection('inicio')" class="btn btn-outline" style="background: rgba(255,255,255,0.9); border: 2px solid #b45309; color: #b45309; font-weight: bold; padding: 8px 16px; transition: all 0.3s ease;">
                                <i class="fas fa-home"></i>
                                Volver al Inicio
                            </button>
                        </div>
                    </div>
                    
                    <div class="card-body">
                        <!-- Botones de acción -->
                        <div class="form-actions">
                            <button onclick="showConsultationForm()" class="btn btn-primary btn-lg">
                                <i class="fas fa-plus-circle"></i>
                                Nueva Consulta
                            </button>
                            <button onclick="showConsultationList()" class="btn btn-outline btn-lg">
                                <i class="fas fa-list"></i>
                                Ver Consultas
                            </button>
                        </div>

                        <!-- Formulario de Nueva Consulta -->
                        <div id="consultationForm" class="form-section" style="display: none;">
                            <h2 class="section-title">
                                <i class="fas fa-calendar-plus"></i>
                                Programar Nueva Consulta
                            </h2>
                            
                            <form id="consultationFormElement" class="registro-form">
                                <div class="grid grid-cols-1 grid-cols-2 gap-6">
                                    <!-- Información de la Mascota -->
                                    <div class="form-section">
                                        <h3 class="section-title">
                                            <i class="fas fa-paw"></i>
                                            Información de la Mascota
                                        </h3>
                                        
                                        <div class="form-group">
                                            <label class="form-label" for="consultationPet">Mascota *</label>
                                            <select class="form-control form-select" id="consultationPet" name="petId" required>
                                                <option value="">Selecciona una mascota</option>
                                            </select>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label class="form-label" for="consultationReason">Motivo de Consulta *</label>
                                            <select class="form-control form-select" id="consultationReason" name="reason" required>
                                                <option value="">Selecciona el motivo</option>
                                                <option value="checkup">Revisión General</option>
                                                <option value="vaccination">Vacunación</option>
                                                <option value="surgery">Cirugía</option>
                                                <option value="emergency">Emergencia</option>
                                                <option value="followup">Seguimiento</option>
                                                <option value="other">Otro</option>
                                            </select>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label class="form-label" for="consultationDescription">Descripción *</label>
                                            <textarea class="form-control" id="consultationDescription" name="description" 
                                                      placeholder="Describe los síntomas o motivo de la consulta..." 
                                                      rows="4" required></textarea>
                                        </div>
                                    </div>
                                    
                                    <!-- Información de la Consulta -->
                                    <div class="form-section">
                                        <h3 class="section-title">
                                            <i class="fas fa-calendar-alt"></i>
                                            Información de la Consulta
                                        </h3>
                                        
                                        <div class="form-group">
                                            <label class="form-label" for="consultationDate">Fecha *</label>
                                            <input type="date" class="form-control" id="consultationDate" name="date" required>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label class="form-label" for="consultationTime">Hora *</label>
                                            <input type="time" class="form-control" id="consultationTime" name="time" required>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label class="form-label" for="consultationVet">Veterinario *</label>
                                            <select class="form-control form-select" id="consultationVet" name="veterinarian" required>
                                                <option value="">Selecciona un veterinario</option>
                                                <option value="dr_garcia">Dr. García</option>
                                                <option value="dra_martinez">Dra. Martínez</option>
                                                <option value="dr_rodriguez">Dr. Rodríguez</option>
                                            </select>
                                        </div>
                                        
                                        <div class="form-group" id="priorityGroup" style="display: none;">
                                            <label class="form-label" for="consultationPriority">Prioridad</label>
                                            <select class="form-control form-select" id="consultationPriority" name="priority">
                                                <option value="normal">Normal</option>
                                                <option value="high">Alta</option>
                                                <option value="urgent">Urgente</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <!-- Botones -->
                                <div class="form-actions">
                                    <button type="submit" class="btn btn-primary btn-lg">
                                        <i class="fas fa-calendar-plus"></i>
                                        Programar Consulta
                                    </button>
                                    <button type="button" onclick="hideConsultationForm()" class="btn btn-outline btn-lg">
                                        <i class="fas fa-times"></i>
                                        Cancelar
                                    </button>
                                </div>
                            </form>
                        </div>

                        <!-- Lista de Consultas -->
                        <div id="consultationList" class="form-section">
                            <h2 class="section-title">
                                <i class="fas fa-list"></i>
                                Consultas Programadas
                            </h2>
                            
                            <div class="table-container">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Mascota</th>
                                            <th>Dueño</th>
                                            <th>Fecha</th>
                                            <th>Hora</th>
                                            <th>Veterinario</th>
                                            <th>Motivo</th>
                                            <th>Estado</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody id="consultationsTableBody">
                                        <tr>
                                            <td colspan="9" class="text-center">No hay consultas programadas</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="text-center">
                <p>&copy; 2025 Veterinaria AnimalCare. Sistema de gestión veterinaria.</p>
            </div>
        </div>
    </footer>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Modal de confirmación de eliminación -->
    <div id="deleteModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-exclamation-triangle"></i> Confirmar Eliminación</h3>
                <button class="close-btn" onclick="closeDeleteModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p>¿Estás seguro de que quieres eliminar esta mascota?</p>
                <div class="pet-info">
                    <p><strong>Nombre:</strong> <span id="deletePetName"></span></p>
                    <p><strong>Dueño:</strong> <span id="deletePetOwner"></span></p>
                </div>
                <p class="warning-text">Esta acción no se puede deshacer.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeDeleteModal()">
                    <i class="fas fa-times"></i> Cancelar
                </button>
                <button class="btn btn-danger" onclick="confirmDelete()">
                    <i class="fas fa-trash"></i> Eliminar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de edición de citas -->
    <div id="editAppointmentModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-edit"></i> Editar Cita Médica</h3>
                <button class="close-btn" onclick="closeEditAppointmentModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Estado actual:</label>
                    <p id="currentAppointmentStatus" class="current-status"></p>
                </div>
                <div class="form-group">
                    <label class="form-label" for="newAppointmentStatus">Nuevo estado:</label>
                    <select id="newAppointmentStatus" class="form-control">
                        <option value="scheduled">Programada</option>
                        <option value="completed">Completada</option>
                        <option value="cancelled">Cancelada</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeEditAppointmentModal()">
                    <i class="fas fa-times"></i> Cancelar
                </button>
                <button class="btn btn-primary" onclick="saveAppointmentEdit()">
                    <i class="fas fa-save"></i> Guardar Cambios
                </button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
